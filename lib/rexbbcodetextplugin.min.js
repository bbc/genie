function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?o(t):e}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var s=r(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return h(this,n)}}
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var u=Phaser.Renderer.WebGL.Utils,d={renderWebGL:function(t,e,n,i){if(0!==e.width&&0!==e.height){n.addToRenderList(e);var s=e.frame,r=s.width,a=s.height,o=u.getTintAppendFloatAlpha,h=t.pipelines.set(this.pipeline,e),l=h.setTexture2D(s.glTexture,e);h.batchTexture(e,s.glTexture,r,a,e.x,e.y,r/e.style.resolution,a/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,r,a,o(e.tintTopLeft,n.alpha*e._alphaTL),o(e.tintTopRight,n.alpha*e._alphaTR),o(e.tintBottomLeft,n.alpha*e._alphaBL),o(e.tintBottomRight,n.alpha*e._alphaBR),e.tintFill,0,0,n,i,!1,l)}},renderCanvas:function(t,e,n,i){0!==e.width&&0!==e.height&&(n.addToRenderList(e),t.batchSprite(e,e.frame,n,i))}},c=Phaser.Display.Canvas.CanvasPool,f=function(t){var e=c.create(this),n=e.getContext("2d");t.syncFont(e,n);var i=n.measureText(t.testString);if(i.hasOwnProperty("actualBoundingBoxAscent")&&i.hasOwnProperty("actualBoundingBoxDescent")){var s=i.actualBoundingBoxAscent,r=i.actualBoundingBoxDescent,a={ascent:s,descent:r,fontSize:s+r};return c.remove(e),a}var o=Math.ceil(i.width*t.baselineX),h=o,l=2*h;h=h*t.baselineY|0,e.width=o,e.height=l,n.fillStyle="#f00",n.fillRect(0,0,o,l),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,h);a={ascent:0,descent:0,fontSize:0};if(!n.getImageData(0,0,o,l))return a.ascent=h,a.descent=h+6,a.fontSize=a.ascent+a.descent,c.remove(e),a;var u,d,f=n.getImageData(0,0,o,l).data,g=f.length,v=4*o,p=0,y=!1;for(u=0;u<h;u++){for(d=0;d<v;d+=4)if(255!==f[p+d]){y=!0;break}if(y)break;p+=v}for(a.ascent=h-u,p=g-v,y=!1,u=l;u>h;u--){for(d=0;d<v;d+=4)if(255!==f[p+d]){y=!0;break}if(y)break;p-=v}return a.descent=u-h,a.fontSize=a.ascent+a.descent,c.remove(e),a},g=0,v=1,p=2,y=0,k=1,x=2,w=/(?:\r\n|\r|\n)/,m=Phaser.Utils.String.Pad,T=function(e,n,i){switch(t(e)){case"number":return"#".concat(m(Math.floor(e).toString(16),6,"0",1));case"function":return e(n,i);default:return e}},S=Phaser.Utils.Objects.GetAdvancedValue,b=Phaser.Utils.Objects.GetValue,P={backgroundColor:["backgroundColor",null],backgroundColor2:["backgroundColor2",null],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0],backgroundCornerRadius:["backgroundCornerRadius",0],backgroundStrokeColor:["backgroundStrokeColor",null],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2],backgroundCornerIteration:["backgroundCornerIteration",null],fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],underlineColor:["underline.color","#000"],underlineThickness:["underline.thickness",0],underlineOffset:["underline.offset",0],halign:["halign","left"],valign:["valign","top"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],lineSpacing:["lineSpacing",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wrapMode:["wrap.mode",1],wrapWidth:["wrap.width",0]},M=function(){function t(n,i){e(this,t),this.parent=n,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(i,!1);var s=b(i,"metrics",!1);this.metrics=s?{ascent:b(s,"ascent",0),descent:b(s,"descent",0),fontSize:b(s,"fontSize",0)}:f(this)}return i(t,[{key:"setStyle",value:function(t,e){if(void 0===e&&(e=!0),t&&t.hasOwnProperty("wrap")){var n=t.wrap;if(n.hasOwnProperty("mode")){var i=n.mode;"string"==typeof i&&(n.mode=O[i])}else n.hasOwnProperty("width")&&(n.mode=1)}for(var s in t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),P)this[s]="wrapCallback"===s||"wrapCallbackScope"===s?b(t,P[s][0],P[s][1]):S(t,P[s][0],P[s][1]);var r=b(t,"font",null);this._font=null===r?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:r;var a=b(t,"fill",null);return null!==a&&(this.color=a),e?this.update(!0):this.parent}},{key:"syncFont",value:function(t,e){e.font=this._font}},{key:"syncStyle",value:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}},{key:"syncShadow",value:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}},{key:"update",value:function(t){return t&&(this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily,this.metrics=f(this)),this.parent.updateText(t)}},{key:"buildFont",value:function(){var t=this.fontStyle+" "+this.fontSize+" "+this.fontFamily;return t!==this._font&&(this._font=t),this}},{key:"setFont",value:function(t){return"string"==typeof t?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=b(t,"fontFamily","Courier"),this.fontSize=b(t,"fontSize","16px"),this.fontStyle=b(t,"fontStyle","")),this.update(!0)}},{key:"setFontFamily",value:function(t){return this.fontFamily=t,this.update(!0)}},{key:"setFontStyle",value:function(t){return this.fontStyle=t,this.update(!0)}},{key:"setFontSize",value:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}},{key:"setTestString",value:function(t){return this.testString=t,this.update(!0)}},{key:"setFixedSize",value:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)}},{key:"setResolution",value:function(t){return this.resolution=t,this.update(!1)}},{key:"setLineSpacing",value:function(t){return this.lineSpacing=t,this.update(!1)}},{key:"setBackgroundColor",value:function(t,e,n){return void 0===n&&(n=!0),this.backgroundColor=T(t,this.canvas,this.context),this.backgroundColor2=T(e,this.canvas,this.context),this.backgroundHorizontalGradient=n,this.update(!1)}},{key:"setBackgroundStrokeColor",value:function(t,e){return this.backgroundStrokeColor=T(t,this.canvas,this.context),this.backgroundStrokeLineWidth=e,this.update(!1)}},{key:"setBackgroundCornerRadius",value:function(t,e){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=e,this.update(!1)}},{key:"setFill",value:function(t){return this.color=T(t,this.canvas,this.context),this.update(!1)}},{key:"setColor",value:function(t){return this.color=T(t,this.canvas,this.context),this.update(!1)}},{key:"setStroke",value:function(t,e){return void 0===t?this.strokeThickness=0:(void 0===e&&(e=this.strokeThickness),this.stroke=T(t,this.canvas,this.context),this.strokeThickness=e),this.update(!0)}},{key:"setShadow",value:function(t,e,n,i,s,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n="#000"),void 0===i&&(i=0),void 0===s&&(s=!1),void 0===r&&(r=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=T(n,this.canvas,this.context),this.shadowBlur=i,this.shadowStroke=s,this.shadowFill=r,this.update(!1)}},{key:"setShadowOffset",value:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}},{key:"setShadowColor",value:function(t){return void 0===t&&(t="#000"),this.shadowColor=T(t,this.canvas,this.context),this.update(!1)}},{key:"setShadowBlur",value:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)}},{key:"setShadowStroke",value:function(t){return this.shadowStroke=t,this.update(!1)}},{key:"setShadowFill",value:function(t){return this.shadowFill=t,this.update(!1)}},{key:"setUnderline",value:function(t,e,n){return void 0===t&&(t="#000"),void 0===e&&(e=0),void 0===n&&(n=0),this.underlineColor=T(t,this.canvas,this.context),this.underlineThickness=e,this.underlineOffset=n,this.update(!1)}},{key:"setUnderlineColor",value:function(t){return void 0===t&&(t="#000"),this.underlineColor=T(t,this.canvas,this.context),this.update(!1)}},{key:"setUnderlineThickness",value:function(t){return void 0===t&&(t=0),this.underlineThickness=t,this.update(!1)}},{key:"setUnderlineOffset",value:function(t){return void 0===t&&(t=0),this.underlineOffset=t,this.update(!1)}},{key:"setWrapMode",value:function(t){return"string"==typeof t&&(t=O[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}},{key:"setWrapWidth",value:function(t){return this.wrapWidth=t,this.update(!1)}},{key:"setAlign",value:function(t,e){return void 0===t&&(t="left"),void 0===e&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}},{key:"setHAlign",value:function(t){return void 0===t&&(t="left"),this.halign=t,this.update(!1)}},{key:"setVAlign",value:function(t){return void 0===t&&(t="top"),this.valign=t,this.update(!1)}},{key:"setMaxLines",value:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)}},{key:"getTextMetrics",value:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}},{key:"toJSON",value:function(){var t={};for(var e in P)t[e]=this[e];return t.metrics=this.getTextMetrics(),t}},{key:"destroy",value:function(){this.parent=void 0}},{key:"canvas",get:function(){return this.parent.canvasText.canvas}},{key:"context",get:function(){return this.parent.canvasText.context}},{key:"lineHeight",get:function(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}}]),t}(),O={none:y,word:k,char:x,character:x},C=Phaser.Utils.Objects.GetValue,L=function(){function t(n,i,s,r,a){e(this,t),this.cornerRadius={},this._width=0,this._height=0,this.setTo(n,i,s,r,a)}return i(t,[{key:"setTo",value:function(t,e,n,i,s){return this.setPosition(t,e),this.setRadius(s),this.setSize(n,i),this}},{key:"setPosition",value:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}},{key:"setRadius",value:function(t){var e,n;void 0===t&&(t=0),"number"==typeof t?(e=t,n=t):(e=C(t,"x",0),n=C(t,"y",0));var i=this.cornerRadius;return i.tl=F(C(t,"tl",void 0),e,n),i.tr=F(C(t,"tr",void 0),e,n),i.bl=F(C(t,"bl",void 0),e,n),i.br=F(C(t,"br",void 0),e,n),this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"minWidth",get:function(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}},{key:"minHeight",get:function(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}},{key:"width",get:function(){return this._width},set:function(t){null==t&&(t=0),this._width=Math.max(t,this.minWidth)}},{key:"height",get:function(){return this._height},set:function(t){null==t&&(t=0),this._height=Math.max(t,this.minHeight)}},{key:"radius",get:function(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}}]),t}(),F=function(t,e,n){return void 0===t?{x:e,y:n}:"number"==typeof t?{x:t,y:t}:t},z=Phaser.Math.DegToRad,W=z(0),B=z(90),R=z(180),_=z(270),A=function(t,e,n,i,s,r,a,o){if(null==o)t.ellipse(e,n,i,s,0,r,a);else for(var h,l,u,d=(a-r)/(o+=1),c=0;c<=o;c++)u=r+d*c,h=e+i*Math.cos(u),l=n+s*Math.sin(u),t.lineTo(h,l)},I=function(t,e,n,i,s,r,a,o,h,l,u,d,c){if(function(t,e,n,i,s,r,a){var o,h,l,u,d,c=new L(e,n,i,s,r),f=c.minWidth,g=c.minHeight,v=i>=f?1:i/f,p=s>=g?1:s/g,y=c.cornerRadius;t.beginPath(),t.translate(e,n),u=i-(h=(o=y.br).x*v),d=s-(l=o.y*p),t.moveTo(i,d),h>0&&l>0?A(t,u,d,h,l,W,B,a):(t.lineTo(i,s),t.lineTo(u,s)),u=h=(o=y.bl).x*v,d=s-(l=o.y*p),t.lineTo(h,s),h>0&&l>0?A(t,u,d,h,l,B,R,a):(t.lineTo(0,s),t.lineTo(0,d)),u=h=(o=y.tl).x*v,d=l=o.y*p,t.lineTo(0,d),h>0&&l>0?A(t,u,d,h,l,R,_,a):(t.lineTo(0,0),t.lineTo(u,0)),u=i-(h=(o=y.tr).x*v),d=l=o.y*p,t.lineTo(u,0),h>0&&l>0?A(t,u,d,h,l,_,W,a):(t.lineTo(i,0),t.lineTo(i,d)),t.closePath()}(e,n,i,s,r,a,c),null!=o){var f;if(null!=u)(f=d?e.createLinearGradient(0,0,s,0):e.createLinearGradient(0,0,0,r)).addColorStop(0,o),f.addColorStop(1,u),o=f;e.fillStyle=o,e.fill()}null!=h&&(e.strokeStyle=h,e.lineWidth=l,e.stroke())},H={draw:function(t,e,n,i){var s=this.penManager;this.hitAreaManager.clear();var r=this.context;r.save();var a=this.defaultStyle;this.drawBackground(a.backgroundColor,a.backgroundStrokeColor,a.backgroundStrokeLineWidth,a.backgroundCornerRadius,a.backgroundColor2,a.backgroundHorizontalGradient,a.backgroundCornerIteration),t+=this.startXOffset,e+=this.startYOffset;var o,h,l,u,d,c,f=a.halign,g=a.valign,v=a.lineHeight,p=s.lines,y=p.length,k=a.maxLines;k>0&&y>k?(h=k,l="center"===g?Math.floor((y-h)/2):"bottom"===g?y-h:0):(h=y,l=0),u=l+h,c="center"===g?Math.max((i-h*v)/2,0):"bottom"===g?Math.max(i-h*v-2,0):0,c+=e;for(var x=l;x<u;x++)if(0!==(o=s.getLineWidth(x))){d="center"===f?(n-o)/2:"right"===f?n-o:0,d+=t;for(var w=p[x],m=0,T=w.length;m<T;m++)this.drawPen(w[m],d,c)}r.restore()},drawPen:function(t,e,n){e+=t.x,n+=t.y;var i=this.canvas,s=this.context;s.save();var r=this.parser.propToContextStyle(this.defaultStyle,t.prop);r.buildFont(),r.syncFont(i,s),r.syncStyle(i,s),r.underlineThickness>0&&t.width>0&&this.drawUnderline(e,n,t.width,r),t.isTextPen&&this.drawText(e,n,t.text,r),t.isImagePen&&this.drawImage(e,n,t.prop.img,r),s.restore(),t.hasAreaMarker&&t.width>0&&this.hitAreaManager.add(t.prop.area,e,n-this.startYOffset,t.width,this.defaultStyle.lineHeight)},clear:function(){var t=this.canvas;this.context.clearRect(0,0,t.width,t.height)},drawBackground:function(t,e,n,i,s,r,a){if(null!=t||null!=e){var o=this.canvas.width,h=this.canvas.height;if(null!=t&&null==e&&0===i)this.context.fillStyle=t,this.context.fillRect(0,0,o,h);else{this.context.clearRect(0,0,o,h),null==e&&(n=0);var l=n/2;o-=n,h-=n,I(this.canvas,this.context,l,l,o,h,i,t,e,n,s,r,a)}}},drawUnderline:function(t,e,n,i){e+=i.underlineOffset-i.underlineThickness/2,this.autoRound&&(t=Math.round(t),e=Math.round(e));var s=this.context,r=s.lineCap;s.lineCap="butt",s.beginPath(),s.strokeStyle=i.underlineColor,s.lineWidth=i.underlineThickness,s.moveTo(t,e),s.lineTo(t+n,e),s.stroke(),s.lineCap=r},drawText:function(t,e,n,i){this.autoRound&&(t=Math.round(t),e=Math.round(e));var s=this.context;i.strokeThickness&&(i.syncShadow(s,i.shadowStroke),s.strokeText(n,t,e)),i.color&&"none"!==i.color&&(i.syncShadow(s,i.shadowFill),s.fillText(n,t,e))},drawImage:function(t,e,n,i){var s=this.parent.imageManager,r=s.get(n),a=s.getFrame(n);t+=r.left,e+=-this.startYOffset+r.y,this.autoRound&&(t=Math.round(t),e=Math.round(e)),this.context.drawImage(a.source.image,a.cutX,a.cutY,a.cutWidth,a.cutHeight,t,e,r.width,r.height)}},j=function(){function t(){e(this,t),this.items=[]}return i(t,[{key:"destroy",value:function(){this.clear(),this.items=void 0}},{key:"pop",value:function(){return this.items.length>0?this.items.pop():null}},{key:"push",value:function(t){return this.items.push(t),this}},{key:"pushMultiple",value:function(t){return this.items.push.apply(this.items,t),t.length=0,this}},{key:"clear",value:function(){return this.items.length=0,this}}]),t}(),X=Phaser.Utils.Objects.GetValue,G=g,Y=v,U=function(){function t(n){e(this,t),this.prop={},this.resetFromJSON(n)}return i(t,[{key:"resetFromJSON",value:function(t){this.text=X(t,"text",""),this.x=X(t,"x",0),this.y=X(t,"y",0),this.width=X(t,"width",0);var e=X(t,"prop",null);null===e&&(e={}),this.prop=e,this.newLineMode=X(t,"newLineMode",0),this.startIndex=X(t,"startIndex",0)}},{key:"plainText",get:function(){var t=this.text;return this.newLineMode===Y&&(t+="\n"),t}},{key:"wrapText",get:function(){var t=this.text;return this.newLineMode!==G&&(t+="\n"),t}},{key:"rawTextLength",get:function(){var t=this.text.length;return this.newLineMode===Y&&(t+=1),t}},{key:"endIndex",get:function(){return this.startIndex+this.rawTextLength}},{key:"lastX",get:function(){return this.x+this.width}},{key:"isTextPen",get:function(){return""!==this.text}},{key:"isImagePen",get:function(){return!!this.prop.img}},{key:"hasAreaMarker",get:function(){return!!this.prop.area}}]),t}(),D=function(t,e){var n=Array.isArray(t);if(void 0===e?e=n?[]:{}:function(t){if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]}(e),n){e.length=t.length;for(var i=0,s=t.length;i<s;i++)e[i]=t[i]}else for(var r in t)e[r]=t[r];return e},V=function(){},N=Phaser.Utils.Objects.GetFastValue,J=g,E=p,q=new j,K=new j,Q=function(){function t(n){e(this,t),this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.PensPool=N(n,"pensPool",q),this.LinesPool=N(n,"linesPool",K),this.tagToText=N(n,"tagToText",V),this.tagToTextScope=N(n,"tagToTextScope",void 0)}return i(t,[{key:"destroy",value:function(){this.freePens(),this.tagToText=void 0,this.tagToTextScope=void 0}},{key:"freePens",value:function(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.PensPool.pushMultiple(this.pens),this.LinesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}},{key:"addTextPen",value:function(t,e,n,i,s,r){var a=this.PensPool.pop();return null==a&&(a=new U),Z.text=t,Z.x=e,Z.y=n,Z.width=i,Z.prop=s,Z.newLineMode=r,a.resetFromJSON(Z),this.addPen(a),this}},{key:"addImagePen",value:function(t,e,n,i){return this.addTextPen("",t,e,n,i,J),this}},{key:"addNewLinePen",value:function(){var t=this.lastPen,e=t?t.lastX:0,n=t?t.y:0,i=t?D(t.prop):null;return this.addTextPen("",e,n,0,i,E),this}},{key:"addPen",value:function(t){var e=this.lastPen;t.startIndex=null==e?0:e.endIndex,this.pens.push(t);var n=this.lastLine;null==n&&(n=this.LinesPool.pop()||[],this.lines.push(n)),n.push(t),t.newLineMode!==J&&(n=this.LinesPool.pop()||[],this.lines.push(n)),this.maxLinesWidth=void 0}},{key:"clone",value:function(e){null==e&&(e=new t),e.freePens();for(var n=0,i=this.lines.length;n<i;n++)for(var s=this.lines[n],r=0,a=s.length;r<a;r++){var o=s[r];e.addPen(o.text,o.x,o.y,o.width,D(o.prop),o.newLineMode)}return e}},{key:"getLineStartIndex",value:function(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}},{key:"getLineEndIndex",value:function(t){t>=this.lines.length&&(t=this.lines.length-1);var e,n,i=!1;for(e=t;e>=0&&!(i=null!=(n=this.lines[e])&&n.length>0);e--);return i?n[n.length-1].endIndex:0}},{key:"getLineWidth",value:function(t){var e=this.lines[t];if(!e)return 0;var n=e[e.length-1];return null==n?0:n.lastX}},{key:"getMaxLineWidth",value:function(){if(void 0!==this.maxLinesWidth)return this.maxLinesWidth;for(var t,e=0,n=0,i=this.lines.length;n<i;n++)(t=this.getLineWidth(n))>e&&(e=t);return this.maxLinesWidth=e,e}},{key:"getLineWidths",value:function(){for(var t=[],e=0,n=this.lines.length;e<n;e++)t.push(this.getLineWidth(e));return t}},{key:"getSliceTagText",value:function(t,e,n){if(void 0===t&&(t=0),void 0===e){var i=this.lastPen;if(null==i)return"";e=i.endIndex}void 0===n&&(n=!1);for(var s,r,a,o,h,l,u="",d=0,c=this.pens.length;d<c&&((o=(s=this.pens[d]).endIndex)<=t||(s=this.pens[d],r=n?s.wrapText:s.plainText,h=s.prop,(a=s.startIndex)>=t&&o<=e||(r=r.substring(t-a,e-a)),this.tagToTextScope?u+=this.tagToText.call(this.tagToTextScope,r,h,l):u+=this.tagToText(r,h,l),l=h,!(o>=e)));d++);return u}},{key:"lastPen",get:function(){return this.pens[this.pens.length-1]}},{key:"lastLine",get:function(){return this.lines[this.lines.length-1]}},{key:"linesCount",get:function(){return this.lines.length}},{key:"plainText",get:function(){for(var t="",e=this.pens,n=0,i=e.length;n<i;n++)t+=e[n].plainText;return t}},{key:"rawTextLength",get:function(){for(var t=0,e=this.pens,n=0,i=this.pens.length;n<i;n++)t+=e[n].rawTextLength;return t}}]),t}(),Z={},$=Phaser.Geom.Rectangle,tt=new j,et=function(){function t(){e(this,t),this.hitAreas=[]}return i(t,[{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){return tt.pushMultiple(this.hitAreas),this}},{key:"add",value:function(t,e,n,i,s){var r=tt.pop();return null===r?r=new $(e,n,i,s):r.setTo(e,n,i,s),r.key=t,this.hitAreas.push(r),this}},{key:"getFirstHitArea",value:function(t,e){for(var n,i=this.hitAreas,s=0,r=i.length;s<r;s++)if((n=i[s]).contains(t,e))return n;return null}},{key:"drawBounds",value:function(t,e,n){void 0===e&&(e=16777215),n&&t.save().scaleCanvas(n.scaleX,n.scaleY).rotateCanvas(n.rotation).translateCanvas(n.x,n.y);for(var i,s=this.hitAreas,r=0,a=s.length;r<a;r++)i=s[r],t.lineStyle(1,e).strokeRect(i.x,i.y,i.width,i.height);return n&&t.restore(),this}}]),t}(),nt=function(t,e,n,i){var s=this.hitAreaManager.getFirstHitArea(n,i);if(null!==s){var r=s.key;this.parent.emit("".concat(t,"-").concat(r),e,n,i),this.parent.emit(t,r,e,n,i)}},it=g,st=v,rt=p,at=y,ot=k,ht=w,lt=[],ut=function(t,e,n,i,s){i<=0&&(n=at);var r=lt;if(dt.pushMultiple(r),!t||!t.length)return r;for(var a,o,h,l=t.split(ht),u=0,d=l.length;u<d;u++)if(a=l[u],h=u===d-1?it:st,n!==at){var c,f;if(o=0===u?i-s:i,a.length<=100)if((w=e(a))<=o){r.push(dt.newline(a,w,h));continue}for(var g,v="",p="",y=0,k=0,x=(c=n===ot?a.split(" "):a).length;k<x;k++)f=c[k],n===ot?(v+=f,k<x-1&&(v+=" ")):v+=f,(g=e(v))>o&&(0===k?r.push(dt.newline("",0,rt)):(r.push(dt.newline(p,y,rt)),v=f,n===ot&&k<x-1&&(v+=" "),g=e(v)),o=i),p=v,y=g;r.push(dt.newline(p,y,h))}else{var w=e(a);r.push(dt.newline(a,w,h))}return r},dt=new j;dt.newline=function(t,e,n){var i=this.pop();return null===i&&(i={}),i.text=t,i.width=e,i.newLineMode=n,i};var ct=Phaser.Utils.Objects.GetValue,ft=y,gt=g,vt=function(){function t(n){e(this,t),this.parent=n.parent,this.context=ct(n,"context",null),this.canvas=this.context.canvas,this.parser=ct(n,"parser",null),this.defaultStyle=ct(n,"style",null),this.autoRound=!0,this.pensPool=ct(n,"pensPool",null),this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new et;var i=this.context;this.getTextWidth=function(t){return i.measureText(t).width}}return i(t,[{key:"destroy",value:function(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0)}},{key:"updatePenManager",value:function(t,e,n,i,s){if(void 0===s&&(s=this.penManager),s.freePens(),""===t)return s;for(var r,a,o,h,l,u=this.canvas,d=this.context,c=0,f=0,g=this.parser.splitText(t),v=0,p=g.length;v<p;v++)if(r=(h=this.parser.tagTextToProp(g[v],a)).plainText,(a=h.prop).img){var y=this.imageManager.getOuterWidth(a.img);n>0&&e!==ft&&n<c+y&&(s.addNewLinePen(),f+=i,c=0),s.addImagePen(c,f,y,D(a)),c+=y}else if(""!==r){var k;this.context.save(),(o=this.parser.propToContextStyle(this.defaultStyle,a)).buildFont(),o.syncFont(u,d),o.syncStyle(u,d);for(var x=0,w=(l=ut(r,this.getTextWidth,e,n,c)).length;x<w;x++)k=l[x],s.addTextPen(k.text,c,f,k.width,D(a),k.newLineMode),k.newLineMode!==gt?(c=0,f+=i):c+=k.width;this.context.restore()}return s}},{key:"newPenManager",value:function(){return new Q({pensPool:this.pensPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}},{key:"getPlainText",value:function(t,e,n){var i;if(null==t)i=this.penManager.plainText;else{var s=this.parser.splitText(t,1);i="";for(var r=0,a=s.length;r<a;r++)i+=s[r]}return null==e&&null==n||(null==e&&(e=0),null==n&&(n=i.length),i=i.substring(e,n)),i}},{key:"getPenManager",value:function(t,e){if(void 0===t)return this.copyPenManager(e,this.penManager);void 0===e&&(e=this.newPenManager());var n=this.defaultStyle;return this.updatePenManager(t,n.wrapMode,n.wrapWidth,n.lineHeight,e),e}},{key:"getText",value:function(t,e,n,i){if(null==t)return this.penManager.getSliceTagText(e,n,i);var s=this.tmpPenManager,r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,s),s.getSliceTagText(e,n,i)}},{key:"copyPenManager",value:function(t,e){return void 0===e&&(e=this.penManager),e.copy(t)}},{key:"getTextWidth",value:function(t){return void 0===t&&(t=this.penManager),t.getMaxLineWidth()}},{key:"getLastPen",value:function(t){return void 0===t&&(t=this.penManager),t.lastPen}},{key:"startXOffset",get:function(){return this.defaultStyle.strokeThickness/2}},{key:"startYOffset",get:function(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}},{key:"lines",get:function(){return this.penManager.lines}},{key:"desplayLinesCount",get:function(){var t=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&t>e&&(t=e),t}},{key:"linesWidth",get:function(){return this.penManager.getMaxLineWidth()}},{key:"linesHeight",get:function(){var t=this.desplayLinesCount,e=this.defaultStyle.lineHeight*t;return t>0&&(e-=this.defaultStyle.lineSpacing),e}},{key:"imageManager",get:function(){return this.parent.imageManager}},{key:"tmpPenManager",get:function(){return null===this._tmpPenManager&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}}]),t}(),pt={setInteractive:function(){this.parent.on("pointerdown",(function(t,e,n,i){nt.call(this,"areadown",t,e,n)}),this).on("pointerup",(function(t,e,n,i){nt.call(this,"areaup",t,e,n)}),this)}};Object.assign(vt.prototype,H,pt);var yt,kt=Phaser.Utils.Objects.GetValue,xt=function(){function t(n){e(this,t),this.textureManager=n,this.images={}}return i(t,[{key:"add",value:function(t,e){if("string"==typeof t)this._add(t,e);else if(Array.isArray(t))for(var n=0,i=(s=t).length;n<i;n++)this._add(s[n]);else{var s=t;for(var t in s)this._add(t,s[t])}return this}},{key:"_add",value:function(t,e){void 0===e&&(e={key:t});var n=e.key,i=e.frame,s=e.width,r=e.height;if(void 0===s||void 0===r){var a=this.textureManager.getFrame(n,i),o=a?a.cutWidth:0,h=a?a.cutHeight:0;void 0===s&&void 0===r?(s=o,r=h):void 0===s?s=o*(r/h):void 0===r&&(r=h*(s/o))}this.images[t]={key:n,frame:i,width:s,height:r,y:kt(e,"y",0),left:kt(e,"left",0),right:kt(e,"right",0)}}},{key:"remove",value:function(t){return this.images.hasOwnProperty(t)&&delete this.images[t],this}},{key:"get",value:function(t){return this.images.hasOwnProperty(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}},{key:"getOuterWidth",value:function(t){var e=this.get(t);return e?e.width+e.left+e.right:0}},{key:"getFrame",value:function(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}},{key:"hasTexture",value:function(t){return!!this.getFrame(t)}}]),t}();var wt=Phaser.Utils.Objects.IsPlainObject,mt=Phaser.DOM.AddToDOM,Tt=Phaser.Display.Canvas.CanvasPool,St=Phaser.GameObjects.GameObject,bt=Phaser.Utils.Objects.GetValue,Pt=Phaser.DOM.RemoveFromDOM,Mt=w,Ot={},Ct=function(n){s(a,St);var r=l(a);function a(t,n,i,s,h,l,u){var d;if(e(this,a),wt(n)){var c=n;n=bt(c,"x",0),i=bt(c,"y",0),s=bt(c,"text",""),h=bt(c,"style","")}if(void 0===n&&(n=0),void 0===i&&(i=0),(d=r.call(this,t,l)).renderer=t.sys.game.renderer,d.setPosition(n,i),d.setOrigin(0,0),d.initPipeline(),d.canvas=Tt.create(o(d)),d.context=d.canvas.getContext("2d"),h){if(h.hasOwnProperty("align")){var f=h.align;delete h.align,h.halign=f}h.hasOwnProperty("stroke")&&!h.hasOwnProperty("strokeThickness")&&(h.strokeThickness=1)}return d.style=new M(o(d),h),d.autoRound=!0,d._text=void 0,d.padding={left:0,right:0,top:0,bottom:0},d.width=1,d.height=1,d.dirty=!1,0===d.style.resolution&&(d.style.resolution=1),d._crop=d.resetCropObject(),d.texture=t.sys.textures.addCanvas(null,d.canvas,!0),d.frame=d.texture.get(),d.frame.source.resolution=d.style.resolution,d.renderer.gl&&(d.renderer.deleteTexture(d.frame.source.glTexture),d.frame.source.glTexture=null),Ot.hasOwnProperty(l)||(Ot[l]=new j),d.canvasText=new vt({parent:o(d),context:d.context,parser:u,style:d.style,pensPool:Ot[l]}),h&&h.padding&&d.setPadding(h.padding),d.setText(s),t.sys.game.events.on("contextrestored",(function(){this.dirty=!0}),o(d)),d}return i(a,[{key:"initRTL",value:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",mt(this.canvas,this.scene.sys.canvas),this.originX=1)}},{key:"setText",value:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this}},{key:"setStyle",value:function(t){return this.style.setStyle(t)}},{key:"setFont",value:function(t){return this.style.setFont(t)}},{key:"setFontFamily",value:function(t){return this.style.setFontFamily(t)}},{key:"setFontSize",value:function(t){return this.style.setFontSize(t)}},{key:"setFontStyle",value:function(t){return this.style.setFontStyle(t)}},{key:"setFixedSize",value:function(t,e){return this.style.setFixedSize(t,e)}},{key:"setBackgroundColor",value:function(t,e,n){return this.style.setBackgroundColor(t,e,n)}},{key:"setBackgroundStrokeColor",value:function(t,e){return this.style.setBackgroundStrokeColor(t,e)}},{key:"setBackgroundCornerRadius",value:function(t,e){return this.style.setBackgroundCornerRadius(t,e)}},{key:"setFill",value:function(t){return this.style.setFill(t)}},{key:"setColor",value:function(t){return this.style.setColor(t)}},{key:"setStroke",value:function(t,e){return this.style.setStroke(t,e)}},{key:"setShadow",value:function(t,e,n,i,s,r){return this.style.setShadow(t,e,n,i,s,r)}},{key:"setShadowOffset",value:function(t,e){return this.style.setShadowOffset(t,e)}},{key:"setShadowColor",value:function(t){return this.style.setShadowColor(t)}},{key:"setShadowBlur",value:function(t){return this.style.setShadowBlur(t)}},{key:"setShadowStroke",value:function(t){return this.style.setShadowStroke(t)}},{key:"setShadowFill",value:function(t){return this.style.setShadowFill(t)}},{key:"setWrapMode",value:function(t){return this.style.setWrapMode(t)}},{key:"setWrapWidth",value:function(t){return this.style.setWrapWidth(t)}},{key:"setAlign",value:function(t){return this.style.setHAlign(t)}},{key:"setLineSpacing",value:function(t){return this.style.setLineSpacing(t)}},{key:"setPadding",value:function(e,n,i,s){if("object"===t(e)){var r=e,a=bt(r,"x",null);null!==a?(e=a,i=a):(e=bt(r,"left",0),i=bt(r,"right",e));var o=bt(r,"y",null);null!==o?(n=o,s=o):(n=bt(r,"top",0),s=bt(r,"bottom",n))}else void 0===e&&(e=0),void 0===n&&(n=e),void 0===i&&(i=e),void 0===s&&(s=n);return this.padding.left=e,this.padding.top=n,this.padding.right=i,this.padding.bottom=s,this.updateText(!1)}},{key:"setResolution",value:function(t){return this.style.setResolution(t)}},{key:"setMaxLines",value:function(t){return this.style.setMaxLines(t)}},{key:"updateText",value:function(t){void 0===t&&(t=!0);var e=this.canvasText,n=this.style;t&&e.updatePenManager(this._text,n.wrapMode,n.wrapWidth,n.lineHeight);var i,s,r=this.padding;0===n.fixedWidth?(this.width=e.linesWidth+r.left+r.right,i=e.linesWidth):(this.width=n.fixedWidth,(i=this.width-r.left-r.right)<e.linesWidth&&(i=e.linesWidth)),0===n.fixedHeight?(this.height=e.linesHeight+r.top+r.bottom,s=e.linesHeight):(this.height=n.fixedHeight,(s=this.height-r.top-r.bottom)<e.linesHeight&&(s=e.linesHeight));var a=this.width,o=this.height;this.updateDisplayOrigin();var h=n.resolution;a*=h,o*=h,a=Math.max(Math.ceil(a),1),o=Math.max(Math.ceil(o),1);var l=this.canvas,u=this.context;l.width!==a||l.height!==o?(l.width=a,l.height=o,this.frame.setSize(a,o)):u.clearRect(0,0,a,o),u.save(),u.scale(h,h),e.draw(r.left,r.top,i,s),u.restore(),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(l,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this}},{key:"getTextMetrics",value:function(){return this.style.getTextMetrics()}},{key:"toJSON",value:function(){var t=Lt.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t}},{key:"preDestroy",value:function(){this.style.rtl&&Pt(this.canvas),Tt.remove(this.canvas),this.canvasText.destroy()}},{key:"setInteractive",value:function(t,e,n){return St.prototype.setInteractive.call(this,t,e,n),this.canvasText.setInteractive(),this}},{key:"getWrappedText",value:function(t,e,n){return(t=this.canvasText.getText(t,e,n,!0)).split(Mt)}},{key:"getPlainText",value:function(t,e,n){return this.canvasText.getPlainText(t,e,n)}},{key:"getText",value:function(t,e,n){return this.canvasText.getText(t,e,n,!1)}},{key:"getSubString",value:function(t,e,n){return this.getText(t,e,n)}},{key:"copyPenManager",value:function(t){return this.canvasText.copyPenManager(t)}},{key:"getPenManager",value:function(t,e){return this.canvasText.getPenManager(t,e)}},{key:"setSize",value:function(t,e){return this.setFixedSize(t,e)}},{key:"resize",value:function(t,e){return this.setFixedSize(t,e)}},{key:"addImage",value:function(t,e){return this.imageManager.add(t,e),this}},{key:"drawAreaBounds",value:function(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}},{key:"text",set:function(t){this.setText(t)},get:function(){return this._text}},{key:"lineSpacing",set:function(t){this.setLineSpacing(t)},get:function(){return this.style.lineSpacing}},{key:"imageManager",get:function(){return t=this.scene.textures,void 0===yt&&(yt=new xt(t)),yt;var t}}]),a}(),Lt=Phaser.GameObjects.Components;Phaser.Class.mixin(Ct,[Lt.Alpha,Lt.BlendMode,Lt.ComputedSize,Lt.Crop,Lt.Depth,Lt.Flip,Lt.GetBounds,Lt.Mask,Lt.Origin,Lt.Pipeline,Lt.ScrollFactor,Lt.Tint,Lt.Transform,Lt.Visible,d]);var Ft={plainText:null,prevProp:null},zt=new M,Wt={},Bt={splitText:function(t,e){for(var n=[],i=0;;){var s=At.exec(t);if(!s){var r=t.length;return i<r&&n.push(t.substring(i,r)),n}var a=s[0],o=At.lastIndex-a.length;i<o&&n.push(t.substring(i,o)),void 0===e&&n.push(a),i=At.lastIndex}},tagTextToProp:function(t,e){var n,i;null==e&&(e={}),e.img&&Rt(e,ie,"img"),It.test(t)?(Rt(e,se,"b",!0),n=""):Ht.test(t)?(Rt(e,ie,"b"),n=""):jt.test(t)?(Rt(e,se,"i",!0),n=""):Xt.test(t)?(Rt(e,ie,"i"),n=""):Gt.test(t)?(i=t.match(Gt),Rt(e,se,"size",i[1]+"px"),n=""):Yt.test(t)?(Rt(e,ie,"size"),n=""):Ut.test(t)?(i=t.match(Ut),Rt(e,se,"color",i[1]),n=""):Dt.test(t)?(Rt(e,ie,"color"),n=""):Vt.test(t)?(i=t.match(Vt),Rt(e,se,"u",!0),n=""):Nt.test(t)?(i=t.match(Nt),Rt(e,se,"u",i[1]),n=""):Jt.test(t)?(Rt(e,ie,"u"),n=""):Et.test(t)?(Rt(e,se,"shadow",!0),n=""):qt.test(t)?(Rt(e,ie,"shadow"),n=""):Kt.test(t)?(Rt(e,se,"stroke",!0),n=""):Qt.test(t)?(i=t.match(Qt),Rt(e,se,"stroke",i[1]),n=""):Zt.test(t)?(Rt(e,ie,"stroke"),n=""):$t.test(t)?(i=t.match($t),Rt(e,se,"img",i[1]),n=""):te.test(t)?(Rt(e,ie,"img"),n=""):ee.test(t)?(i=t.match(ee),Rt(e,se,"area",i[1]),n=""):ne.test(t)?(Rt(e,ie,"area"),n=""):n=t;var s=Ft;return s.plainText=n,s.prop=e,s},propToContextStyle:function(t,e){var n=zt;if(e.hasOwnProperty("img"))n.image=e.img;else{if(n.image=null,e.hasOwnProperty("family")?n.fontFamily=e.family:n.fontFamily=t.fontFamily,e.hasOwnProperty("size")){var i=e.size;"number"==typeof i&&(i=i.toString()+"px"),n.fontSize=i}else n.fontSize=t.fontSize;n.fontStyle=_t(e.b,e.i),e.hasOwnProperty("color")?n.color=e.color:n.color=t.color,e.hasOwnProperty("stroke")?!0===e.stroke?(n.stroke=t.stroke,n.strokeThickness=t.strokeThickness):(n.stroke=e.stroke,n.strokeThickness=t.strokeThickness):(n.stroke=t.stroke,n.strokeThickness=0)}return e.hasOwnProperty("shadow")?!0===e.shadow?(n.shadowColor=t.shadowColor,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY,n.shadowBlur=t.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor=e.shadow,n.shadowOffsetX=t.shadowOffsetX,n.shadowOffsetY=t.shadowOffsetY,n.shadowBlur=t.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor="#000",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowStroke=!1,n.shadowFill=!1),e.hasOwnProperty("u")?!0===e.u?(n.underlineColor=t.underlineColor,n.underlineThickness=t.underlineThickness,n.underlineOffset=t.underlineOffset):(n.underlineColor=e.u,n.underlineThickness=t.underlineThickness,n.underlineOffset=t.underlineOffset):(n.underlineColor="#000",n.underlineThickness=0,n.underlineOffset=0),n},propToTagText:function(t,e,n){for(var i in null==n&&(n=Wt),n)e.hasOwnProperty(i)||(t="[/"+i+"]"+t);var s="";for(var i in e)n[i]!==e[i]&&("size"===i?s+="[size="+e[i].replace("px","")+"]":"color"===i||"stroke"===i||"img"===i?s+="["+i+"="+e[i]+"]":"u"===i?!0===e[i]?s+="[u]":s+="[u="+e[i]+"]":s+="["+i+"]");return t=s+t}},Rt=function(t,e,n,i){return e===se?t[n]=i:t.hasOwnProperty(n)&&delete t[n],t},_t=function(t,e){return t&&e?"bold italic":t?"bold":e?"italic":""},At=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]/gi,It=/\[b\]/i,Ht=/\[\/b\]/i,jt=/\[i\]/i,Xt=/\[\/i\]/i,Gt=/\[size=(\d+)\]/i,Yt=/\[\/size\]/i,Ut=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,Dt=/\[\/color\]/i,Vt=/\[u\]/i,Nt=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,Jt=/\[\/u\]/i,Et=/\[shadow\]/i,qt=/\[\/shadow\]/i,Kt=/\[stroke\]/i,Qt=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,Zt=/\[\/stroke\]/i,$t=/\[img=([^\]]+)\]/i,te=/\[\/img\]/i,ee=/\[area=([^\]]+)\]/i,ne=/\[\/area\]/i,ie=!1,se=!0,re=function(t){s(i,Ct);var n=l(i);function i(t,s,r,a,o){return e(this,i),n.call(this,t,s,r,a,o,"rexBBCodeText",Bt)}return i}();function ae(t,e,n,i){var s=new re(this.scene,t,e,n,i);return this.scene.add.existing(s),s}var oe=Phaser.Utils.Objects.GetAdvancedValue,he=Phaser.GameObjects.BuildGameObject;function le(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=oe(t,"text",""),i=oe(t,"style",null),s=oe(t,"padding",null);null!==s&&(i.padding=s);var r=new re(this.scene,0,0,n,i);return he(this.scene,r,t),r.autoRound=oe(t,"autoRound",!0),r}var ue=function(t){return null==t||""===t||0===t.length},de=function(t){s(r,Phaser.Plugins.BasePlugin);var n=l(r);function r(t){var i;return e(this,r),i=n.call(this,t),t.registerGameObject("rexBBCodeText",ae,le),i}return i(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}}]),r}();!function(e,n,i){if("object"===t(e)){if(ue(n)){if(null==i)return;"object"===t(i)&&(e=i)}else{"string"==typeof n&&(n=n.split("."));var s=n.pop();(function(e,n,i){var s=e;if(ue(n));else{var r;"string"==typeof n&&(n=n.split("."));for(var a=0,o=n.length;a<o;a++){var h;if(null==s[r=n[a]]||"object"!==t(s[r]))h=a===o-1?void 0===i?{}:i:{},s[r]=h;s=s[r]}}return s}(e,n))[s]=i}}}(window,"RexPlugins.GameObjects.BBCodeText",re);export default de;
